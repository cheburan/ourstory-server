(this["webpackJsonptranscribe-editor"]=this["webpackJsonptranscribe-editor"]||[]).push([[0],{120:function(t,e,n){"use strict";n.r(e);var a=n(0),r=n.n(a),o=n(7),c=n.n(o),i=n(19),u=n(17),l=n(45),s=n.n(l),m=n(51),d=n(156),f=n(160),p=n(121),b=n(157),h=n(46),v=Object(h.a)({root:{position:"relative",paddingTop:"56.25%",width:"100%",height:0},video:{position:"absolute",top:0,left:0,bottom:0,right:0,width:"100%",height:"100%",zIndex:1}});function E(t){var e=t.time,n=t.src,a=r.a.useRef(null),o=v();return r.a.useEffect((function(){var t=function(t){if(!isNaN(t))return t;var e=t.match(/^(?:(\d{2,}):)?(\d{2}):(\d{2})[,.](\d{3})$/);if(!e)throw new Error('Invalid SRT or VTT time format: "'+t+'"');var n=e[1]?36e5*parseInt(e[1],10):0,a=6e4*parseInt(e[2],10),r=1e3*parseInt(e[3],10),o=parseInt(e[4],10);return n+a+r+o}(e)/1e3;t>0&&(a.current.currentTime=t)}),[e]),r.a.createElement(f.a,{className:o.root},r.a.createElement("video",{className:o.video,ref:a,src:n,controls:!0,autoPlay:!1}))}var g=n(151),k=n(153),w=n(154),j=n(33),O=n(162),I=Object(h.a)((function(t){return Object(O.a)({root:function(e){return{padding:t.spacing(1),margin:t.spacing(0,1),backgroundColor:e.focused?"#f0f0f0":"#FFF",minWidth:480,cursor:"pointer"}}})}));function y(t){var e=t.chunk,n=t.contribution,a=t.onClick,o=I(t),c=e.starttime,i=e.endtime,u="".concat(c," - ").concat(i);return r.a.createElement(g.a,{className:o.root,onClick:a},r.a.createElement(k.a,{title:u,titleTypographyProps:{variant:"h6"}}),r.a.createElement(w.a,null,r.a.createElement(j.a,{gutterBottom:!0},n&&n.text)))}var x=Object(h.a)((function(t){return Object(O.a)({root:{display:"flex",flexDirection:"row",overflow:"scroll",padding:t.spacing(2,1)}})}));function C(t){var e=t.user,n=t.chunks,a=t.activeIndex,o=t.onSelect,c=x(t);return console.log(e),console.log(n),r.a.createElement("div",{className:c.root},n.map((function(t,n){var c=(t.contributions||[]).findIndex((function(t){return t.user===e})),i=c<0?null:t.contributions[c];return r.a.createElement(y,{key:n,chunk:t,focused:a===n,contribution:i,onClick:function(){return o({chunkId:n,contribId:c,contribution:i})}})})))}var S=n(30),T=n(159),N=n(155),F=n(161),A=Object(h.a)((function(t){return Object(O.a)({root:{margin:t.spacing(3,0)},editor:{width:"100%"}})}));function B(t){var e=A(),n=t.title,a=t.chunk,o=t.contrib,c=r.a.useState(o),l=Object(u.a)(c,2),s=l[0],m=l[1],d=a.starttime,f=a.endtime,p="".concat(d," - ").concat(f);return r.a.createElement(g.a,{className:e.root},r.a.createElement(k.a,{title:n,titleTypographyProps:{variant:"body1"},subheader:p}),r.a.createElement(w.a,null,r.a.createElement(T.a,{className:e.editor,label:"Subtitle",multiline:!0,rows:"2",value:s.text,onChange:function(t){return e="text",n=t.target.value,void m(Object(i.a)({},s,Object(S.a)({},e,n)));var e,n},variant:"outlined"})),r.a.createElement(N.a,null,r.a.createElement(F.a,{onClick:function(e){t.onCancel()}},"Cancel"),r.a.createElement(F.a,{variant:"contained",onClick:function(e){t.onSubmit(s)},color:"primary"},"Submit")))}var J=Object(h.a)((function(t){return Object(O.a)({box:{maxHeight:600,overflow:"auto"}})}));function P(t){var e=t.src,n=t.user,a=t.chunks,o=t.onUpdate,c=J(),l=r.a.useState(null),s=Object(u.a)(l,2),h=s[0],v=s[1],g=r.a.useState(0),k=Object(u.a)(g,2),w=k[0],j=k[1],O=r.a.useState(null),I=Object(u.a)(O,2),y=I[0],x=I[1],S=function(t,e){o(a.map((function(n,a){return a===t?Object(i.a)({},n,{},e):n})))};return r.a.createElement(d.a,{fixed:!0},r.a.createElement(f.a,{marginTop:3},r.a.createElement(p.a,null,r.a.createElement(b.a,{container:!0,spacing:4},r.a.createElement(b.a,{item:!0,xs:3}),r.a.createElement(b.a,{item:!0,xs:6},r.a.createElement(f.a,{className:c.box},r.a.createElement(E,{time:w,src:e}))),r.a.createElement(b.a,{item:!0,xs:3})))),h&&h.contribution&&r.a.createElement(f.a,{marginTop:3},r.a.createElement(B,{title:"Edit Contribution",chunk:a[h.chunkId],contrib:h.contribution,onCancel:function(){v(null)},onSubmit:function(t){var e=h.chunkId,n=h.contribId,r=a[e].contributions.map((function(e,a){return a===n?t:e}));S(e,{contributions:r}),v(null)}})),h&&!h.contribution&&r.a.createElement(f.a,{marginTop:3},r.a.createElement(B,{title:"Add Contribution",chunk:a[h.chunkId],contrib:{user:n,localeto:"en-AU"},onCancel:function(){v(null)},onSubmit:function(t){var e=h.chunkId,n=[].concat(Object(m.a)(a[e].contributions||[]),[t]);S(e,{contributions:n}),v(null)}})),r.a.createElement(f.a,{marginTop:3,style:{display:h?"none":"block"}},r.a.createElement(C,{user:n,chunks:a,activeIndex:y,onSelect:function(t){var e=a[t.chunkId];j(e.starttime),x(t.chunkId),v(t)}})))}var U=n(158),W=n(50),R=n.n(W);var $=function(){var t=window.location.href.split("/")[5].split("?")[0],e=R.a.parse(window.location.search),n=e.apikey,a=e.name,o="/api/watch/getvideo/".concat(t),c="/api/watch/edit/".concat(t),l="/api/watch/savedit/".concat(t,"?apikey=").concat(n),m=r.a.useState({}),d=Object(u.a)(m,2),f=d[0],p=d[1];r.a.useEffect((function(){fetch(c).then((function(t){return t.json()})).then((function(t){p(t)})).catch((function(t){console.error(t)}))}),[]);var b=s()(f,["transcription","chunks"],[]);return r.a.createElement(r.a.Fragment,null,r.a.createElement(U.a,null),r.a.createElement(P,{chunks:b,onUpdate:function(t){var e=Object(i.a)({},f,{transcription:Object(i.a)({},f.transcription,{chunks:t})});p(e);var n=JSON.stringify(e);console.log(n),fetch(l,{method:"post",headers:{Accept:"application/json","Content-Type":"application/json"},body:n}).then((function(t){return t})).catch((function(t){console.error(t)}))},src:o,user:a}))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));c.a.render(r.a.createElement($,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(t){t.unregister()}))},59:function(t,e,n){t.exports=n(120)}},[[59,1,2]]]);
//# sourceMappingURL=main.454a6980.chunk.js.map