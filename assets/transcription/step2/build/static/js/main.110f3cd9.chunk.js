(this["webpackJsonptranscribe-editor"]=this["webpackJsonptranscribe-editor"]||[]).push([[0],{108:function(t,e,n){"use strict";n.r(e);var a=n(0),o=n.n(a),r=n(7),c=n.n(r),i=n(22),u=n(17),l=n(45),s=n.n(l),m=n(50),d=n(144),f=n(148),h=n(109),b=n(145),p=n(46),v=Object(p.a)({root:{position:"relative",paddingTop:"56.25%",width:"100%",height:0},video:{position:"absolute",top:0,left:0,bottom:0,right:0,width:"100%",height:"100%",zIndex:1}});function E(t){var e=t.time,n=t.src,a=o.a.useRef(null),r=v();return o.a.useEffect((function(){var t=function(t){if(!isNaN(t))return t;var e=t.match(/^(?:(\d{2,}):)?(\d{2}):(\d{2})[,.](\d{3})$/);if(!e)throw new Error('Invalid SRT or VTT time format: "'+t+'"');var n=e[1]?36e5*parseInt(e[1],10):0,a=6e4*parseInt(e[2],10),o=1e3*parseInt(e[3],10),r=parseInt(e[4],10);return n+a+o+r}(e)/1e3;t>0&&(a.current.currentTime=t)}),[e]),o.a.createElement(f.a,{className:r.root},o.a.createElement("video",{className:r.video,ref:a,src:n,controls:!0,autoPlay:!1}))}var g=n(139),k=n(141),w=n(142),j=n(33),O=n(150),I=Object(p.a)((function(t){return Object(O.a)({root:function(e){return{padding:t.spacing(1),margin:t.spacing(0,1),backgroundColor:e.focused?"#f0f0f0":"#FFF",minWidth:480,cursor:"pointer"}}})}));function y(t){var e=t.chunk,n=t.contribution,a=t.onClick,r=I(t),c=e.starttime,i=e.endtime,u="".concat(c," - ").concat(i);return o.a.createElement(g.a,{className:r.root,onClick:a},o.a.createElement(k.a,{title:u,titleTypographyProps:{variant:"h6"}}),o.a.createElement(w.a,null,o.a.createElement(j.a,{gutterBottom:!0},n&&n.text)))}var x=Object(p.a)((function(t){return Object(O.a)({root:{display:"flex",flexDirection:"row",overflow:"scroll",padding:t.spacing(2,1)}})}));function C(t){var e=t.user,n=t.chunks,a=t.activeIndex,r=t.onSelect,c=x(t);return console.log(e),console.log(n),o.a.createElement("div",{className:c.root},n.map((function(t,n){var c=(t.contributions||[]).findIndex((function(t){return t.user===e})),i=c<0?null:t.contributions[c];return o.a.createElement(y,{key:n,chunk:t,focused:a===n,contribution:i,onClick:function(){return r({chunkId:n,contribId:c,contribution:i})}})})))}var S=n(30),T=n(147),N=n(143),F=n(149),A=Object(p.a)((function(t){return Object(O.a)({root:{margin:t.spacing(3,0)},editor:{width:"100%"}})}));function B(t){var e=A(),n=t.title,a=t.chunk,r=t.contrib,c=o.a.useState(r),l=Object(u.a)(c,2),s=l[0],m=l[1],d=a.starttime,f=a.endtime,h="".concat(d," - ").concat(f);return o.a.createElement(g.a,{className:e.root},o.a.createElement(k.a,{title:n,titleTypographyProps:{variant:"body1"},subheader:h}),o.a.createElement(w.a,null,o.a.createElement(T.a,{className:e.editor,label:"Subtitle",multiline:!0,rows:"2",value:s.text,onChange:function(t){return e="text",n=t.target.value,void m(Object(i.a)({},s,Object(S.a)({},e,n)));var e,n},variant:"outlined"})),o.a.createElement(N.a,null,o.a.createElement(F.a,{onClick:function(e){t.onCancel()}},"Cancel"),o.a.createElement(F.a,{variant:"contained",onClick:function(e){t.onSubmit(s)},color:"primary"},"Submit")))}var J=Object(p.a)((function(t){return Object(O.a)({box:{maxHeight:600,overflow:"auto"}})}));function P(t){var e=t.src,n=t.user,a=t.chunks,r=t.onUpdate,c=J(),l=o.a.useState(null),s=Object(u.a)(l,2),p=s[0],v=s[1],g=o.a.useState(0),k=Object(u.a)(g,2),w=k[0],j=k[1],O=o.a.useState(null),I=Object(u.a)(O,2),y=I[0],x=I[1],S=function(t,e){r(a.map((function(n,a){return a===t?Object(i.a)({},n,{},e):n})))};return o.a.createElement(d.a,{fixed:!0},o.a.createElement(f.a,{marginTop:3},o.a.createElement(h.a,null,o.a.createElement(b.a,{container:!0,spacing:4},o.a.createElement(b.a,{item:!0,xs:3}),o.a.createElement(b.a,{item:!0,xs:6},o.a.createElement(f.a,{className:c.box},o.a.createElement(E,{time:w,src:e}))),o.a.createElement(b.a,{item:!0,xs:3})))),p&&p.contribution&&o.a.createElement(f.a,{marginTop:3},o.a.createElement(B,{title:"Edit Contribution",chunk:a[p.chunkId],contrib:p.contribution,onCancel:function(){v(null)},onSubmit:function(t){var e=p.chunkId,n=p.contribId,o=a[e].contributions.map((function(e,a){return a===n?t:e}));S(e,{contributions:o}),v(null)}})),p&&!p.contribution&&o.a.createElement(f.a,{marginTop:3},o.a.createElement(B,{title:"Add Contribution",chunk:a[p.chunkId],contrib:{user:n,localeto:"en-AU"},onCancel:function(){v(null)},onSubmit:function(t){var e=p.chunkId,n=[].concat(Object(m.a)(a[e].contributions||[]),[t]);S(e,{contributions:n}),v(null)}})),o.a.createElement(f.a,{marginTop:3,style:{display:p?"none":"block"}},o.a.createElement(C,{user:n,chunks:a,activeIndex:y,onSelect:function(t){var e=a[t.chunkId];j(e.starttime),x(t.chunkId),v(t)}})))}var U=n(146);var W=function(){var t=window.location.href.split("/")[5].split("?")[0],e=window.location.href.split("apikey=")[1],n="/api/watch/getvideo/".concat(t),a="/api/watch/edit/".concat(t),r="/api/watch/savedit/".concat(t,"?apikey=").concat(e),c=o.a.useState({}),l=Object(u.a)(c,2),m=l[0],d=l[1];o.a.useEffect((function(){fetch(a).then((function(t){return t.json()})).then((function(t){d(t)})).catch((function(t){console.error(t)}))}),[]);var f=s()(m,["chunks"],[]);return o.a.createElement(o.a.Fragment,null,o.a.createElement(U.a,null),o.a.createElement(P,{chunks:f,onUpdate:function(t){var e=Object(i.a)({},m,{chunks:t});d(e);var n=JSON.stringify({data:e});console.log(n),fetch(r,{method:"post",headers:{Accept:"application/json","Content-Type":"application/json"},body:n}).then((function(t){return t})).catch((function(t){console.error(t)}))},src:n,user:"dave"}))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));c.a.render(o.a.createElement(W,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(t){t.unregister()}))},58:function(t,e,n){t.exports=n(108)}},[[58,1,2]]]);
//# sourceMappingURL=main.110f3cd9.chunk.js.map