(this.webpackJsonptranscription=this.webpackJsonptranscription||[]).push([[0],{111:function(e,t,n){},157:function(e,t,n){"use strict";n.r(t);var r,i=n(0),c=n.n(i),a=n(15),o=n.n(a),s=(n(111),n(7)),u=n(18),l=n.n(u),d=n(31),j=n(217),h=n(199),b=n(218),p=n(219),O=n(229),f=n(202),g=n(215),x=n(216),m=n(6),v=n(194),C=new l.a({en:{defaultChunkName:"{0} second chunk"},fr:{defaultChunkName:"{0} SECOND CHUNK"}}),T=function(e){return(t=Math.floor(e))<10?"0".concat(t<0?0:t):t.toString();var t},y=function(e){return"".concat(T(e/3600),":").concat(T(e/60),":").concat(T(e%60),":").concat(T(Math.round(100*(e-Math.floor(e)))))},k=function(e){return e>3600?y(e).substring(0,8):y(e).substring(3,8)},w=function(e){return e.length>0?e[e.length-1].endtimestamp:"00:00:00:00"},S=function(e){return e.length>0?e[e.length-1].endtimeseconds:0},N=function(e,t){for(var n=0;n<e.length;n++)if(t>e[n].starttimeseconds&&t<e[n].endtimeseconds)return e[n]},E=function(e){return e.transcriptions.reduce((function(e,t){return e||""!==t.content}),!1)},I=function(e){return{hours:Number(e.slice(0,2)),minutes:Number(e.slice(3,5)),seconds:Number(e.slice(6,8)),milliseconds:Number(e.slice(9,11))}},R=function(e){return 60*e.hours*60+60*e.minutes+e.seconds},A=function(e){return e.name?e.name:C.formatString(C.defaultChunkName,"".concat(R(I(e.endtimestamp))-R(I(e.starttimestamp))))},D=n(189),H=n(192),B=n(159),P=n(193),M=n(1),W=function(e){var t=e.title,n=e.children,r=e.contentStyle,i=e.cardStyle;return Object(M.jsx)(D.a,{variant:"outlined",style:Object(m.a)({},i),children:Object(M.jsxs)(H.a,{style:Object(m.a)({},r),children:[Object(M.jsx)(B.a,{variant:"h5",component:"h2",children:t}),t?Object(M.jsx)(P.a,{style:{margin:"16px 0 16px 0"}}):null,n]})})},U=Object(v.a)({titleContainer:{fontSize:"1.2rem",position:"relative"}}),F=function(e){var t=e.chunk,n=e.children,r=e.style,i=e.transcriptionIcon,c=U(),a=function(e){return{start:I(e.starttimestamp),end:I(e.endtimestamp)}}(t),o=R(a.end),s=R(a.start);return Object(M.jsx)(W,{title:Object(M.jsx)("div",{children:Object(M.jsxs)("span",{className:c.titleContainer,style:{display:"flex",flexDirection:"column"},children:[Object(M.jsxs)("span",{style:{fontWeight:600,overflowWrap:"anywhere",display:"flex",justifyContent:"space-between"},children:[A(t),i]}),"".concat(k(s)," - ").concat(k(o))]})}),cardStyle:Object(m.a)(Object(m.a)({},r),{},{position:"relative",margin:"8px"}),children:n})},L=Object(v.a)({videoPlayerContainer:{margin:"auto"},actionButton:{"&:hover":{background:"#d9534f"}},chunksList:{flexWrap:"nowrap"},backButton:{background:"transparent",color:"black",fontSize:"16px"},backButtonContainer:{marginTop:"4px"},onboardingTitle:{margin:0},chunkCardBody:{marginTop:"8px",position:"relative"},newChunkButtonContainer:{position:"absolute",right:0,bottom:0,margin:"16px 16px 32px 16px",display:"flex"}}),Y=function(e){var t=Object(i.useState)(e),n=Object(s.a)(t,2),r=n[0],c=n[1];return[r,function(){return c((function(e){return!e}))},c]},V=function(e,t){var n,r=Object(i.useState)(null!==(n=window.localStorage.getItem(e))&&void 0!==n?n:t),c=Object(s.a)(r,2),a=c[0],o=c[1],u=Y(!1),l=Object(s.a)(u,2),d=l[0],j=l[1];if(!d){var h=window.localStorage.getItem(e);j(),h&&o(h)}return[a,Object(i.useCallback)((function(t){"string"==typeof t||null===t?(o(t),window.localStorage.setItem(e,null!==t&&void 0!==t?t:"")):t&&o((function(n){var r=t(n);return window.localStorage.setItem(e,null!==r&&void 0!==r?r:""),r}))}),[e]),Object(i.useCallback)((function(){window.localStorage.removeItem(e),o(void 0)}),[o,e])]},G={userName:void 0,setName:function(){return null},clearName:function(){return null}},K=Object(i.createContext)(G),z=function(e){var t=e.children,n=V("name"),r=Object(s.a)(n,3),c=r[0],a=r[1],o=r[2],u=Object(i.useMemo)((function(){return{userName:c,setName:a,clearName:o}}),[c,a,o]);return Object(M.jsx)(K.Provider,{value:u,children:t})},_=n(196),X=n(197),J=n(198),q=n(200),Q=n(58),Z=n.n(Q),$=function(e,t){var n=Object(i.useState)(t);return null!==e&&void 0!==e?e:n},ee=n(237),te=Object(v.a)({progressBarColor:{color:"#f54414"},progressBarRoot:{padding:"0px",width:"96%",transform:"translateX(2%)",height:6},progressBarRail:{height:6},progressBarTrack:{height:6},progressBarThumb:{height:18,width:18,marginTop:-6},progressBarMark:{height:14,marginTop:-3},markedSlider:{margin:0}}),ne=function(e){var t=e.styles,n=Object(d.a)(e,["styles"]),r=te();return Object(M.jsx)("div",{style:t,children:Object(M.jsx)(ee.a,Object(m.a)({classes:{colorPrimary:r.progressBarColor,root:r.progressBarRoot,rail:r.progressBarRail,track:r.progressBarTrack,thumb:r.progressBarThumb,mark:r.progressBarMark,marked:r.markedSlider}},n))})},re=n(87),ie=function(e,t,n,r,c,a,o){var u=Object(s.a)(t,2),l=u[0],d=u[1],j=Object(i.useState)(!1),h=Object(s.a)(j,2),b=h[0],p=h[1],O=Object(i.useState)(!1),f=Object(s.a)(O,2),g=f[0],x=f[1],m=e.progress,v=e.setProgress,C=e.setProgressWithVideoUpdate;Object(i.useEffect)((function(){b&&n.current&&r(n.current.getDuration())}),[r,n,b]);var T=Object(i.useMemo)((function(){return{playing:!g&&l,progressInterval:100,onProgress:function(e){var t=e.played;return v(t)},onReady:function(){return p(!0)},onEnded:function(){return d(!1)}}}),[g,l,d,v]),y=Object(re.a)((function(e){return C(e/100)}),10),k=function(e,t){var n=Object(i.useState)(e),r=Object(s.a)(n,2),c=r[0],a=r[1],o=Object(i.useCallback)((function(e){a(e),t(e)}),[a,t]);return{value:c,setWithoutVideoUpdate:a,setWithVideoUpdate:o}}(100*m,y),w=k.value,S=k.setWithVideoUpdate,N=k.setWithoutVideoUpdate;Object(i.useEffect)((function(){N(100*m)}),[m,N]);var E=Object(i.useMemo)((function(){return{value:w,min:100*c.start,max:100*c.end,step:1e-4,onChange:function(e,t){a&&a(),x(!0),S(t)},onChangeCommitted:function(e,t){x(!1)}}}),[w,c,a,S]);return Object(i.useEffect)((function(){m>c.end+1e-4?o&&!g?C(c.start):(C(c.end),d(!1)):m<c.start-1e-4&&C(c.start+.1)}),[m,l,d,c.end,c.start,o,C,g]),{playerProps:T,progressBarProps:E,showControls:!0,isPlaying:l,toggleIsPlaying:function(){return d((function(e){return!e}))}}},ce=n(236),ae=function(e){var t=e.children,n=e.open,r=e.value;return Object(M.jsx)(ce.a,{open:n,enterTouchDelay:0,placement:"top",title:r,children:t})},oe=Object(v.a)({videoControlsContainer:{display:"flex",left:"50%",position:"absolute",bottom:"50%",transform:"translate(-50%, 50%)"},videoPlayerButton:{background:"linear-gradient(45deg, #FE6B8B 30%, #f54414 90%)"},roundButton:{borderRadius:"50px",width:"64px",height:"64px",color:"white",display:"relative",top:"4px"},videoPlayerContainer:{position:"relative",bottom:0,top:0,right:0,left:0},progressBarContainer:{left:"0",bottom:"0",marginBottom:"-39px",transform:"translateY(calc(-100% - 16px))"},progressBarColor:{color:"#f54414"},progressBarRoot:{padding:"0px",width:"96%",transform:"translateX(2%)",height:4},progressBarRail:{height:4},progressBarTrack:{height:4},progressBarThumb:{height:12,marginTop:-4},progressBarMark:{height:10,marginTop:-3}}),se=function(e){var t=e.url,n=e.playerRef,r=e.controller,c=e.sliderMarks,a=e.progressState,o=e.onProgressDrag,u=e.slider,l=e.loop,d=oe(),j=$(null===r||void 0===r?void 0:r.durationState,0),b=Object(s.a)(j,2),p=b[0],f=b[1],g=a.progress,x=a.setProgressWithVideoUpdate,v=$(null===r||void 0===r?void 0:r.playingState,!1),C=$(null===r||void 0===r?void 0:r.splitState,{start:0,end:1}),T=Object(s.a)(C,1)[0],y=ie(a,v,n,f,T,o,l),w=y.playerProps,S=y.progressBarProps,N=y.showControls,E=y.isPlaying,I=y.toggleIsPlaying,R=Object(i.useCallback)((function(e){return k((e/100-T.start===0?0:e/100-T.start)*p)}),[p,T.start]),A=Object(i.useCallback)((function(){p&&x((function(e){return e+5/p}))}),[x,p]),D=Object(i.useCallback)((function(){p&&x((function(e){return e-5/p}))}),[x,p]);return Object(M.jsxs)(O.a,{className:d.videoPlayerContainer,children:[Object(M.jsx)(Z.a,Object(m.a)({url:t,ref:n,width:"100%",height:"100%",loop:l},w)),N&&Object(M.jsxs)("div",{className:d.videoControlsContainer,children:[Object(M.jsx)("div",{style:{position:"absolute",right:"240px",bottom:-4},children:Object(M.jsx)(_.a,{disableRipple:!0,className:"".concat(d.videoPlayerButton," ").concat(d.roundButton),onClick:D,children:Object(M.jsx)(X.a,{fontSize:"large"})})}),Object(M.jsx)(_.a,{disableRipple:!0,variant:"contained",color:"primary",className:d.videoPlayerButton,onClick:I,children:E&&Object(M.jsx)(J.a,{fontSize:"large"})||Object(M.jsx)(h.a,{fontSize:"large"})}),Object(M.jsx)("div",{style:{position:"absolute",left:"240px",bottom:-4},children:Object(M.jsx)(_.a,{onClick:A,disableRipple:!0,className:"".concat(d.videoPlayerButton," ").concat(d.roundButton),children:Object(M.jsx)(q.a,{fontSize:"large"})})})]}),u||Object(M.jsxs)("div",{className:d.progressBarContainer,children:[Object(M.jsx)(B.a,{variant:"caption",style:{margin:"8px",color:"#FFFFFF"},children:p&&"".concat(k((g-T.start)*p)," / ").concat(k((T.end-T.start)*p))}),Object(M.jsx)(ne,Object(m.a)({valueLabelDisplay:"auto",valueLabelFormat:R,ValueLabelComponent:ae,marks:c||[]},S))]})]})},ue=function(e){var t=Object(i.useRef)(null),n=Object(i.useCallback)((function(e){var n,r,i=null===t||void 0===t||null===(n=t.current)||void 0===n?void 0:n.getSecondsLoaded();i&&i>0&&(null===(r=t.current)||void 0===r||r.seekTo(e,"fraction"))}),[]),r=Object(i.useState)(0),c=Object(s.a)(r,2),a=c[0],o=c[1],u=Object(i.useState)({start:0,end:1}),l=Object(i.useCallback)((function(e){"number"===typeof e?(o(e),n(e)):o((function(t){var r=e(t);return n(r),r}))}),[n]),d=Object(i.useState)(0),j=Object(s.a)(d,2),h=j[0],b=j[1],p=Object(i.useState)(null!==e&&void 0!==e&&e);return{progressState:{progress:a,setProgress:o,setProgressWithVideoUpdate:l},splitState:u,playingState:p,duration:h,controller:{durationState:[h,b],playingState:p,splitState:u},playerRef:t}},le=n(232),de=function(e,t){return e.reduce((function(e,t,n,r){return n+1<r.length?e.concat([[t,r[n+1]]]):e}),[]).map((function(e){return t(e[0],e[1])}))},je=function(e,t){return e.filter(t).length>0},he=Object(i.createContext)([[],function(){return null}]),be={ChunksProvider:function(e){var t=e.state,n=e.children;return Object(M.jsx)(he.Provider,{value:t,children:n})},useChunksState:function(){return Object(i.useContext)(he)}},pe=function(e){return Object(i.useCallback)((function(t,n,r){e((function(e){return e.map((function(e){var i,c;return e.id===t.id?Object(m.a)(Object(m.a)({},(null===(i=e.review)||void 0===i?void 0:i.selectedtranscription)===(null===(c=function(e,t){return e.transcriptions.filter((function(e){return e.creatorid===t}))[0]}(e,r))||void 0===c?void 0:c.id)&&""===n?function(e){return Object(m.a)(Object(m.a)({},e),{},{review:void 0})}(e):e),{},{transcriptions:je(e.transcriptions,(function(e){return e.creatorid===r}))?""===n?e.transcriptions.filter((function(e){return e.creatorid!==r})):e.transcriptions.map((function(e){return e.creatorid===r?Object(m.a)(Object(m.a)({},e),{},{content:n,updatedat:new Date}):e})):e.transcriptions.concat(""===n?[]:[{creatorid:r,content:n,id:Object(le.a)(),updatedat:new Date}])}):e}))}))}),[e])},Oe=function(e,t){return""!==e?Object(m.a)(Object(m.a)({},t),{},{name:e}):Object(m.a)(Object(m.a)({},t),{},{name:void 0})},fe=Object(v.a)({button:function(e){return{backgroundColor:"#d9534f",color:"#FFFFFF",lineHeight:"34px",height:"60px",borderRadius:e?"50%":"6px",padding:e?"4px":"3px 8px 3px 8px",textTransform:"none","&:hover":{backgroundColor:"#ff7570"},"&:disabled":{backgroundColor:"#fabbb9"}}}}),ge=function(e){var t=e.children,n=e.round,r=e.styles,i=Object(d.a)(e,["children","round","styles"]),c=function(e){return Object(v.a)({overrideStyles:Object(m.a)({},e)})}(r)(),a=fe(!!n);return Object(M.jsx)(_.a,Object(m.a)(Object(m.a)({disableRipple:!0,className:"".concat(a.button," ").concat(c.overrideStyles)},i),{},{children:t}))},xe=n(230),me=n(233),ve=n(201),Ce=n(203),Te=n(93),ye=c.a.forwardRef((function(e,t){var n=e.children,r=e.style;return Object(M.jsx)(Te.a,{ref:t,elevation:0,style:r,children:n})})),ke=Object(v.a)({modal:{outline:"0",display:"flex",alignItems:"center",justifyContent:"center"},modalContentBox:{padding:"16px"}}),we=function(e){var t=e.children,n=e.header,r=e.exit,i=Object(d.a)(e,["children","header","exit"]),c=ke();return Object(M.jsx)(me.a,Object(m.a)(Object(m.a)({className:c.modal},i),{},{children:Object(M.jsx)(ve.a,{style:{outline:"none"},children:Object(M.jsxs)(ye,{children:[n&&Object(M.jsxs)(f.a,{children:[Object(M.jsxs)("div",{style:{display:"flex",flexDirection:"row",justifyContent:"space-between",paddingTop:"8px"},children:[Object(M.jsx)("div",{style:{display:"flex",flexDirection:"column",justifyContent:"center",alignContent:"center"},children:n}),Object(M.jsx)(ge,{onClick:r,children:Object(M.jsx)(Ce.a,{})})]}),Object(M.jsx)(P.a,{style:{margin:"12px 0px 12px 0px"}})]}),Object(M.jsx)("div",{className:c.modalContentBox,children:t})]})})}))},Se=window.location.href.split("apikey=")[1],Ne="localhost",Ee=Se,Ie=function(e){var t=1===e["data-index"];return Object(M.jsx)("span",Object(m.a)(Object(m.a)({},e),{},{style:Object(m.a)(Object(m.a)({},e.style),{},{transform:t?"0":"translateY(14px)",backgroundColor:t?"#d9534f":"#f77965"}),children:t?null:Object(M.jsx)("div",{style:{height:"14px",width:"4px",transform:"translateY(-9px)",backgroundColor:"#f77965"}})}))},Re=function(e){var t=e.story_id,n=e.chunk,r=e.storyDuration,c=e.croppedSplitState,a=ue(),o=a.progressState,u=a.controller,l=a.playerRef,d=Object(i.useState)([0,0]),j=Object(s.a)(d,2),h=j[0],b=j[1],p=Object(s.a)(c,2),O=p[0],g=p[1],x=o.setProgressWithVideoUpdate;return Object(i.useEffect)((function(){x(n.starttimeseconds);var e=n.starttimeseconds-2/r,t=n.endtimeseconds+2/r;b([e<0?0:e,t>1?1:t]),g([n.starttimeseconds,n.endtimeseconds])}),[n.starttimeseconds,n.endtimeseconds,r,x,g]),Object(M.jsxs)("div",{children:[Object(M.jsx)(f.a,{children:Object(M.jsx)("h2",{style:{margin:0},children:"Cropping:"})}),Object(M.jsx)(se,{progressState:o,url:"http://".concat(Ne,":8845/api/watch/getvideo/").concat(t),controller:u,playerRef:l,slider:Object(M.jsx)(ne,{value:[100*O[0],100*o.progress,100*O[1]],min:100*h[0],max:100*h[1],step:1e-4,ThumbComponent:Ie,onChange:function(e,t){g([t[0]/100,t[2]/100]),o.setProgressWithVideoUpdate(t[1]/100)}})})]})},Ae=function(e){var t=Object(s.a)(e.nameState,2),n=t[0],r=t[1];return Object(M.jsx)(xe.a,{variant:"outlined",label:"Edit Name",style:{marginTop:"8px"},value:n,onChange:function(e){return r(e.target.value)}})},De=function(e){var t=e.story_id,n=e.chunk,r=e.exit,c=e.storyDuration,a=Object(i.useState)(""),o=Object(s.a)(a,2),u=o[0],l=o[1];Object(i.useEffect)((function(){n&&l(n.name?n.name:"")}),[n]);var d=function(){var e=be.useChunksState(),t=Object(s.a)(e,2)[1];return function(e,n,r,i,c){t((function(t){var a,o,s=(a=e,(o=t).reduce((function(e,t,n){return t.id===a.id?{prev:o[n-1],next:o[n+1]}:e}),{prev:void 0,next:void 0}));return function(e){return e.filter((function(e){return e.endtimeseconds>e.starttimeseconds}))}(t.map((function(t){var i,a;return t.id===e.id?Object(m.a)(Object(m.a)({},c?Oe(c,t):Object(m.a)(Object(m.a)({},t),{},{name:void 0})),{},{starttimeseconds:r[0],starttimestamp:y(r[0]*n),endtimeseconds:r[1],endtimestamp:y(r[1]*n),updatedat:new Date}):t.id===(null===(i=s.next)||void 0===i?void 0:i.id)?Object(m.a)(Object(m.a)({},t),{},{starttimeseconds:r[1],starttimestamp:y(r[1]*n),updatedat:new Date}):t.id===(null===(a=s.prev)||void 0===a?void 0:a.id)?Object(m.a)(Object(m.a)({},t),{},{endtimeseconds:r[0],endtimestamp:y(r[0]*n),updatedat:new Date}):t})).concat(s.prev||0===r[0]?[]:[{starttimestamp:y(0),starttimeseconds:0,endtimestamp:y(r[0]*n),endtimeseconds:r[0],creatorid:i,updatedat:new Date,id:Object(le.a)(),transcriptions:[]}])).sort((function(e,t){return e.endtimeseconds-t.endtimeseconds}))}))}}(),j=Object(i.useState)([0,0]),h=Object(s.a)(j,2),b=h[0],p=h[1],O=Object(i.useContext)(K).userName;return Object(M.jsx)(we,{exit:function(){n&&O&&d(n,c,b,O,u),r()},open:void 0!==n,header:Object(M.jsx)(Ae,{nameState:[u,l]}),children:Object(M.jsx)("div",{style:{paddingBottom:"24px"},children:n&&Object(M.jsx)(Re,{story_id:t,croppedSplitState:[b,p],storyDuration:c,chunk:n})})})},He=function(e){var t=e.url,n=e.time,r=Object(i.useRef)(null);return Object(M.jsx)(Z.a,{crossOrigin:"anonymous",url:t,width:"100%",height:"100%",playing:!1,ref:r,id:"video-thumbnail-player",onReady:function(){var e;null===(e=r.current)||void 0===e||e.seekTo(n,"fraction")}})},Be=n(67),Pe=n(205),Me=new l.a({en:{back:"Back"},fr:{back:"BACK"}}),We=Object(v.a)({backButton:{}}),Ue=function(e){var t=e.action,n=We();return Object(M.jsxs)(Be.a,{className:n.backButton,onClick:t,children:[Object(M.jsx)(Pe.a,{fontSize:"large"}),Object(M.jsx)(B.a,{variant:"h5",style:{position:"relative",left:-5},children:Me.back})]})},Fe=n(62);!function(e){e[e.True=0]="True"}(r||(r={}));var Le=function(e,t){var n=Object(i.useState)(r.True),c=Object(s.a)(n,2),a=c[0],o=c[1],u=Object(i.useCallback)((function(){a!==r.True&&(e.apply(void 0,Object(Fe.a)(a)),o(r.True))}),[a,e]);return{attemptingActionWith:a,cancelAction:function(){return o(r.True)},attemptAction:function(){for(var n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];return t.apply(void 0,r)?o(r):e.apply(void 0,r)},confirmAction:u}},Ye=n(207),Ve=n(206),Ge=function(e){var t=e.message;return Object(M.jsx)("h2",{style:{margin:0},children:Object(M.jsxs)("div",{style:{display:"flex",alignItems:"center"},children:[Object(M.jsx)(Ve.a,{style:{marginRight:"8px"},fontSize:"large"}),t]})})},Ke=function(e){var t=e.actionControls,n=e.warningMessage,i=e.children,c=t.attemptingActionWith,a=t.cancelAction,o=t.confirmAction;return Object(M.jsx)(we,{open:c!==r.True,exit:a,header:Object(M.jsx)(Ge,{message:n}),children:Object(M.jsxs)("div",{children:[c!==r.True&&i.apply(void 0,Object(Fe.a)(c)),Object(M.jsx)("br",{}),Object(M.jsx)("div",{style:{display:"flex",justifyContent:"center"},children:Object(M.jsxs)(ge,{style:{marginTop:"8px"},onClick:o,children:[Object(M.jsx)(Ye.a,{fontSize:"large",style:{marginRight:"8px"}}),Object(M.jsx)(B.a,{variant:"subtitle1",children:"Confirm"})]})})]})})},ze=function(e){var t=e.chunk,n=e.exit;return Object(M.jsx)(we,{open:void 0!==t,header:Object(M.jsx)("h2",{style:{margin:0,overflowWrap:"anywhere"},children:'Transcriptions for "'.concat(t&&A(t),'"')}),exit:n,children:Object(M.jsx)("div",{style:{overflow:"scroll"},children:null===t||void 0===t?void 0:t.transcriptions.map((function(e){return Object(M.jsx)(W,{title:Object(M.jsx)("b",{children:e.creatorid}),contentStyle:{whiteSpace:"pre"},children:e.content},e.id)}))})})},_e=function(e){var t=e.children,n=e.style,r=Object(i.useRef)(null);return Object(i.useEffect)((function(){var e;null===(e=r.current)||void 0===e||e.scrollIntoView({behavior:"smooth",block:"end",inline:"nearest"})}),[]),Object(M.jsx)("div",{ref:r,style:Object(m.a)({},n),children:t})},Xe=n(209),Je=n(210),qe=n(211),Qe=n(92),Ze=n(208),$e=c.a.forwardRef((function(e,t){var n=e.anchor,r=e.show,i=e.menuItems;return Object(M.jsx)(Qe.a,{ref:t,anchorEl:n,open:r,children:i.map((function(e,t){return Object(M.jsx)(Ze.a,{onClick:e.handler,children:e.content},t)}))})})),et=function(e){var t=e.menuItems,n=Object(i.useState)(!1),r=Object(s.a)(n,2),c=r[0],a=r[1],o=Object(i.useRef)(null);return Object(M.jsxs)("div",{style:{position:"relative",top:0,right:0,display:"flex",flexDirection:"row",alignSelf:"flex-start"},children:[Object(M.jsx)(Xe.a,{onClickAway:function(){return a(!1)},children:Object(M.jsx)(Je.a,{style:{padding:0},onClick:function(){return a(!0)},ref:o,children:Object(M.jsx)(qe.a,{})})}),Object(M.jsx)($e,{show:c,anchor:o.current,menuItems:t})]})},tt=n(212),nt=Object(v.a)({loadingModal:{outline:"0",display:"flex",alignItems:"center",justifyContent:"center"}}),rt=function(e){var t=e.open,n=nt();return Object(M.jsx)(me.a,{open:t,className:n.loadingModal,children:Object(M.jsx)(ve.a,{style:{outline:"none",display:"flex",justifyContent:"center"},children:Object(M.jsx)(tt.a,{})})})},it=n(239),ct=n(213),at=n(235),ot=n(214),st=function(e){var t=Object(i.useState)([0,null]),n=Object(s.a)(t,2),r=Object(s.a)(n[0],2),c=r[0],a=r[1],o=n[1],u=Object(i.useCallback)((function(){o([0,null])}),[o]),l=Object(i.useMemo)((function(){return c===e.length-1}),[c,e.length]);return{page:c,direction:a,goTo:function(t){return"next"===t&&c<e.length-1?o((function(e){return[Object(s.a)(e,1)[0]+1,"next"]})):"prev"===t&&c>0?o((function(e){return[Object(s.a)(e,1)[0]-1,"prev"]})):null},reset:u,lastPage:l}},ut=Object(v.a)({contentContainer:{paddingBottom:"32px",height:"40vh",display:"flex",flexDirection:"column"},instructionsContainer:{flexGrow:4},divider:{marginBottom:"16px"},centerVertically:{position:"relative",top:"50%",transform:"translateY(-50%)"},buttonsContainer:{display:"flex",justifyContent:"space-between"}}),lt=function(e){var t=e.show,n=e.dismiss,r=e.title,c=e.steps,a=e.startButtonContent,o=st(c),s=o.page,u=o.goTo,l=o.reset,d=Object(i.useCallback)((function(){l(),n()}),[]),j=Object(i.useCallback)((function(){s===c.length-1?d():u("next")}),[s,u,d,c.length]),h=Object(i.useCallback)((function(){u("prev")}),[u]),b=ut();return Object(M.jsx)(we,{header:r,open:t,exit:d,children:Object(M.jsxs)("div",{className:b.contentContainer,children:[Object(M.jsx)(it.a,{activeStep:s,children:c.map((function(e,t){return Object(M.jsx)(ct.a,{children:Object(M.jsx)(at.a,{})},t)}))}),Object(M.jsxs)(f.a,{className:b.instructionsContainer,children:[Object(M.jsx)(P.a,{className:b.divider}),Object(M.jsx)("div",{className:b.centerVertically,children:Object(M.jsx)(B.a,{variant:"h5",children:c[s]})})]}),Object(M.jsxs)(f.a,{className:b.buttonsContainer,children:[0===s?Object(M.jsx)("div",{}):Object(M.jsxs)(Be.a,{onClick:h,children:[Object(M.jsx)(Pe.a,{})," Previous"]}),Object(M.jsx)(Be.a,{onClick:j,children:s===c.length-1?a:Object(M.jsxs)(M.Fragment,{children:["Next ",Object(M.jsx)(ot.a,{})]})})]})]})})},dt=new l.a({en:{instructionsOne:"You are about to chunk the video. The aim of chunking is to make Transcribing easy.",instructionsTwo:"Rather than transcribing the entire video at once, you will break the video down into smaller chunks, which you will transcribe individually.",instructionsThree:"You should aim to have only one person speaking in each chunk. Create a new chunk when there is a change in who is talking, there is a gap in the talking, or a person begins/ends talking.",instructionsFour:"To create a chunk, press the '+' button in the bottom right corner. The time that you press the '+' button in the video will be the end of the new chunk.",instructionsTitle:"Chunking Instructions",startChunking:"Start Chunking",attemptDeleteWarningTitle:"This chunk has a transcription",attemptDeleteWarningBody:"Attempting to delete chunk {0}, which has a transcription saved to it. Are you sure you want to delete it?",attemptNewChunkTitle:"The enclosing chunk has a transcription",attemptNewChunkBody:'Creating a new chunk here will delete the transcriptions on the enclosing chunk, "{0}". Are you sure you want to discard these transcriptions?',delete:"Delete",edit:"Edit",viewTranscriptions:"View Transcriptions",newChunk:"New Chunk",doneCard:"Done Card"},fr:{instructionsOne:"YOU ARE ABOUT TO CHUNK THE VIDEO. THE AIM OF CHUNKING IS TO MAKE TRANSCRIBING EASY.",instructionsTwo:"RATHER THAN TRANSCRIBING THE ENTIRE VIDEO AT ONCE, YOU WILL BREAK THE VIDEO DOWN INTO SMALLER CHUNKS, WHICH YOU WILL TRANSCRIBE INDIVIDUALLY.",instructionsThree:"YOU SHOULD AIM TO HAVE ONLY ONE PERSON SPEAKING IN EACH CHUNK. CREATE A NEW CHUNK WHEN THERE IS A CHANGE IN WHO IS TALKING, THERE IS A GAP IN THE TALKING, OR A PERSON BEGINS/ENDS TALKING.",instructionsFour:"TO CREATE A CHUNK, PRESS THE '+' BUTTON IN THE BOTTOM RIGHT CORNER. THE TIME THAT YOU PRESS THE '+' BUTTON IN THE VIDEO WILL BE THE END OF THE NEW CHUNK.",instructionsTitle:"CHUNKING INSTRUCTIONS",startChunking:"START CHUNKING",attemptDeleteWarningTitle:"THIS CHUNK HAS A TRANSCRIPTION",attemptDeleteWarningBody:"ATTEMPTING TO DELETE CHUNK {0}, WHICH HAS A TRANSCRIPTION SAVED TO IT. ARE YOU SURE YOU WANT TO DELETE IT?",attemptNewChunkTitle:"THE ENCLOSING CHUNK HAS A TRANSCRIPTION",attemptNewChunkBody:'CREATING A NEW CHUNK HERE WILL DELETE THE TRANSCRIPTIONS ON THE ENCLOSING CHUNK, "{0}". ARE YOU SURE YOU WANT TO DISCARD THESE TRANSCRIPTIONS?',delete:"DELETE",edit:"EDIT",viewTranscriptions:"VIEW TRANSCRIPTIONS",newChunk:"NEW CHUNK",doneCard:"DONE CARD"}}),jt=function(e){var t=e.atExit,n=e.story_id,r=e.onboarding,c=be.useChunksState(),a=Object(s.a)(c,2),o=a[0],u=a[1];Object(i.useEffect)((function(){u((function(e){return e}))}),[u]);var l=ue(),v=l.progressState,C=l.playingState,T=l.duration,k=l.controller,I=l.playerRef,R=v.progress,D=v.setProgressWithVideoUpdate,H=Object(s.a)(C,2)[1],B=Object(i.useMemo)((function(){return function(e){return e.map((function(e){return{value:100*e.endtimeseconds}}))}(o)}),[o]),P=Object(i.useContext)(K).userName,U=function(){var e=be.useChunksState(),t=Object(s.a)(e,2)[1];return function(e){t((function(t){return e(t),t}))}}(),Y=function(e){return function(t){return e((function(e){return de(e.filter((function(e){return e.id!==t.id})),(function(e,t){return e.endtimeseconds!==t.starttimeseconds?Object(m.a)(Object(m.a)({},t),{},{starttimeseconds:e.endtimeseconds,starttimestamp:e.endtimestamp,id:Object(le.a)(),updatedat:new Date,transcriptions:[]}):t})).concat((n=e.filter((function(e){return e.id!==t.id}))[0],n?0===n.starttimeseconds?[n]:[Object(m.a)(Object(m.a)({},n),{},{starttimeseconds:0,starttimestamp:"00:00:00:00",id:Object(le.a)(),updatedat:new Date,transcriptions:[]})]:[])).sort((function(e,t){return e.endtimeseconds-t.endtimeseconds}));var n}))}}(u),V=function(e){return function(t,n,r){e((function(e){if(function(e,t,n){return 0===t||t>n||e.reduce((function(e,n){return e||n.endtimeseconds===t||n.starttimeseconds===t}),!1)}(e,t,n))return e;var i=N(e,t);return void 0!==i?e.filter((function(e){return e.id!==i.id})).concat([{starttimestamp:i.starttimestamp,starttimeseconds:i.starttimeseconds,endtimestamp:y(t*n),endtimeseconds:t,creatorid:r,updatedat:new Date,id:Object(le.a)(),transcriptions:[]},{starttimestamp:y(t*n),starttimeseconds:t,endtimestamp:i.endtimestamp,endtimeseconds:i.endtimeseconds,creatorid:r,updatedat:new Date,id:Object(le.a)(),transcriptions:[]}]).sort((function(e,t){return e.endtimeseconds-t.endtimeseconds})):e.concat([{starttimestamp:w(e),endtimestamp:y(t*n),starttimeseconds:S(e),endtimeseconds:t,creatorid:r,updatedat:new Date,id:Object(le.a)(),transcriptions:[]}])}))}}(u),G=L(),z=Object(i.useState)(void 0),_=Object(s.a)(z,2),X=_[0],J=_[1];Object(i.useEffect)((function(){void 0!==X&&R>X.endtimeseconds&&(J(void 0),H(!1))}),[R,X,o,H]);var q=Object(i.useCallback)((function(e,t,n){(null===t||void 0===t?void 0:t.id)===e.id&&n?H(!1):(H(!0),J(e),D(e.starttimeseconds))}),[D,H]),Q=Object(i.useState)(void 0),Z=Object(s.a)(Q,2),$=Z[0],ee=Z[1],te=Le((function(e,t,n,r){return V(t,n,r)}),(function(e,t){var n=N(e,t);return void 0!==n&&E(n)})),ne=te.attemptAction,re=Object(d.a)(te,["attemptAction"]),ie=Le(Y,(function(e){return E(e)})),ce=ie.attemptAction,ae=Object(d.a)(ie,["attemptAction"]),oe=Object(i.useState)(void 0),je=Object(s.a)(oe,2),he=je[0],pe=je[1],Oe=Object(i.useMemo)((function(){return{marginRight:"4px",position:"absolute",left:"50%",top:"50%",transform:"translate(-50%, -50%)",opacity:.8}}),[]),fe=Object(i.useRef)({backgroundColor:"green",height:"100%",padding:"16px",display:"flex",flexDirection:"row",justifyContent:"center",alignItems:"center",color:"white"}),xe=Object(i.useRef)({margin:"8px",transform:"translateY(8px)",height:"calc(100% - 16px)"}),me=r.showOnboardingModal,ve=r.dismissOnboardingModal,Ce=Object(i.useCallback)((function(){return J(void 0)}),[J]);return Object(M.jsxs)(O.a,{children:[Object(M.jsx)(rt,{open:0===T}),Object(M.jsx)(f.a,{children:Object(M.jsx)("div",{className:G.backButtonContainer,children:Object(M.jsx)(Ue,{action:t})})}),Object(M.jsx)(lt,{show:me,dismiss:ve,title:Object(M.jsx)("h2",{className:G.onboardingTitle,children:dt.instructionsTitle}),steps:[dt.instructionsOne,dt.instructionsTwo,dt.instructionsThree,dt.instructionsFour],startButtonContent:Object(M.jsx)("div",{children:dt.startChunking})}),Object(M.jsx)(De,{story_id:n,chunk:$,exit:function(){return ee(void 0)},storyDuration:T}),Object(M.jsx)(Ke,{actionControls:ae,warningMessage:Object(M.jsx)("div",{children:dt.attemptDeleteWarningTitle}),children:function(){return Object(M.jsx)("div",{style:{overflowWrap:"anywhere"},children:dt.formatString(dt.attemptDeleteWarningBody,(arguments.length<=0?void 0:arguments[0])&&' "'.concat(A(arguments.length<=0?void 0:arguments[0]),'"'))})}}),Object(M.jsx)(Ke,{actionControls:re,warningMessage:Object(M.jsx)("div",{children:dt.attemptNewChunkTitle}),children:function(){for(var e,t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];return Object(M.jsx)("div",{children:dt.formatString(dt.attemptNewChunkBody,A(null!==(e=N(n[0],n[1]))&&void 0!==e?e:n[0][0]))})}}),Object(M.jsx)(ze,{chunk:he,exit:function(){return pe(void 0)}}),Object(M.jsx)("div",{className:G.videoPlayerContainer,children:Object(M.jsx)(se,{controller:k,progressState:v,playerRef:I,url:"http://".concat(Ne,":8845/api/watch/getvideo/").concat(n),sliderMarks:B,onProgressDrag:Ce})}),Object(M.jsx)(g.a,{className:G.chunksList,cellHeight:"auto",cols:2.5,children:o.map((function(e){return Object(M.jsx)(x.a,{children:Object(M.jsx)(_e,{children:Object(M.jsx)(F,{chunk:e,transcriptionIcon:Object(M.jsx)(et,{menuItems:[{content:dt.delete,handler:function(){return function(e){U((function(t){t.forEach((function(t){return t.id===e.id&&ce(t)}))}))}(e)}},{content:dt.edit,handler:function(){return ee(e)}}].concat(0!==e.transcriptions.length?[{content:dt.viewTranscriptions,handler:function(){return pe(e)}}]:[])}),children:Object(M.jsxs)("div",{className:G.chunkCardBody,children:[Object(M.jsx)(He,{url:"http://".concat(Ne,":8845/api/watch/getvideo/").concat(n),time:e.starttimeseconds+(e.endtimeseconds-e.starttimeseconds)/2}),Object(M.jsx)(ge,{round:!0,color:"primary",style:Oe,onClick:function(){return q(e,X,C[0])},children:(null===X||void 0===X?void 0:X.id)===e.id&&C[0]?Object(M.jsx)(j.a,{}):Object(M.jsx)(h.a,{})})]})})})},e.id)})).concat(S(o)>.75?[Object(M.jsx)(x.a,{onClick:function(){1!==S(o)&&P&&V(1,T,P),t()},children:Object(M.jsx)(_e,{style:{height:"100%"},children:Object(M.jsx)(W,{contentStyle:fe.current,cardStyle:xe.current,children:Object(M.jsx)(b.a,{fontSize:"large",style:{marginRight:"4px"}})})})},dt.doneCard)]:[])}),Object(M.jsx)("div",{children:Object(M.jsx)("div",{className:G.newChunkButtonContainer,children:Object(M.jsx)(ge,{round:!0,"aria-label":dt.newChunk,style:{margin:"8px"},onClick:function(){P&&ne(o,R,T,P)},children:Object(M.jsx)(p.a,{})})})})]})},ht=n(161);var bt,pt=function(e){return Object(M.jsxs)(O.a,{display:"flex",alignItems:"center",children:[Object(M.jsx)(O.a,{width:"100%",mr:1,children:Object(M.jsx)(ht.a,Object(m.a)({variant:"determinate"},e))}),Object(M.jsx)(O.a,{minWidth:35,children:Object(M.jsx)(B.a,{variant:"body2",color:"textSecondary",children:"".concat(Math.round(e.value),"%")})})]})},Ot="#dddddd",ft=Object(v.a)({paper:{border:"1px solid ".concat(Ot),borderTop:"0",borderTopRightRadius:"0",borderTopLeftRadius:"0",padding:"15px"},stepHeader:{padding:"4px",backgroundColor:"#f5f5f5",border:"1px solid ".concat(Ot),borderBottomRightRadius:"0",borderBottomLeftRadius:"0"},button:{marginTop:"16px"}}),gt=new l.a({en:{perform:"Perform {0}"},fr:{perform:"PERFORM {0}"}}),xt=function(e){var t=e.title,n=e.description,r=e.progress,i=e.onSelect,c=e.enabled,a=ft();return Object(M.jsxs)("div",{children:[Object(M.jsx)(ye,{children:Object(M.jsxs)("div",{className:a.stepHeader,children:[Object(M.jsx)(B.a,{variant:"subtitle1",children:t}),Object(M.jsx)(pt,{value:r})]})}),Object(M.jsx)(ye,{children:Object(M.jsxs)("div",{className:a.paper,children:[n,Object(M.jsx)("br",{}),Object(M.jsx)(O.a,{style:{marginTop:"8px"},children:Object(M.jsx)(ge,{disabled:!c,onClick:i,children:Object(M.jsx)(B.a,{style:{padding:"6px"},children:gt.formatString(gt.perform,t)})})})]})})]})},mt=Object(v.a)({introContainer:{textAlign:"center"},transcriberModal:{display:"flex",flexDirection:"column"}}),vt=n(238),Ct=c.a.forwardRef((function(e,t){var n=e.placeholder,r=e.buttonText,c=e.classes,a=e.onSubmit,o=Object(i.useState)(null),u=Object(s.a)(o,2),l=u[0],d=u[1];return Object(M.jsxs)("div",{ref:t,children:[Object(M.jsx)(vt.a,{className:c.input,onChange:function(e){return d(e.target.value)},placeholder:n}),Object(M.jsx)(ge,{onClick:function(){return l&&a(l)},styles:{height:"3rem",borderRadius:"0px 8px 8px 0px"},children:Object(M.jsx)(B.a,{variant:"subtitle1",children:r})})]})})),Tt=Object(v.a)({modal:{outline:"0",display:"flex",alignItems:"center",justifyContent:"center"},modalContentBox:{padding:"16px"},input:{flex:1,width:"400px",height:"3rem",border:"1px solid #cccccc",paddingLeft:"8px",borderRadius:"8px 0px 0px 8px"}}),yt=function(e){var t=e.show,n=e.setName,r=Tt();return Object(M.jsx)(we,{open:t,children:Object(M.jsxs)("div",{children:[Object(M.jsx)(B.a,{variant:"subtitle1",children:"Please enter your name before performing transcription:"}),Object(M.jsx)(Ct,{placeholder:"my name",buttonText:"Perform Transcription",classes:r,onSubmit:n})]})})},kt=n(220),wt=Object(v.a)({indabaLink:{color:"#d9534f",cursor:"pointer"}}),St=c.a.forwardRef((function(e,t){var n=e.children,r=Object(d.a)(e,["children"]),i=wt();return Object(M.jsx)(kt.a,Object(m.a)(Object(m.a)({ref:t,className:i.indabaLink},r),{},{children:n}))})),Nt=new l.a({en:{greeting:"Hello {0}",transcriptionFor:"Field Transcription for {0}",notMe:"This is not me!",steps:"There are 3 stages to transcribing, select which stage you are performing"},fr:{greeting:"HELLO {0}",transcriptionFor:"FIELD TRANSCRIPTION FOR {0}",notMe:"THIS IS NOT ME!",steps:"THERE ARE 3 STAGES TO TRANSCRIBING, SELECT WHICH STAGE YOU ARE PERFORMING"}}),Et=function(e){var t=e.name;return Object(M.jsx)(B.a,{style:{fontWeight:"lighter",overflowWrap:"anywhere"},variant:"h5",children:t&&Nt.formatString(Nt.greeting,t)})},It=function(e){var t=e.storyName;return Object(M.jsx)(B.a,{variant:"h3",style:{color:"gray",fontWeight:"lighter"},children:Nt.formatString(Nt.transcriptionFor,Object(M.jsx)(O.a,{component:"span",style:{color:"black"},children:t}))})},Rt=function(e){var t=e.storyName,n=e.steps,r=e.logOutAction,c=Object(i.useContext)(K),a=c.userName,o=c.setName,s=c.clearName,u=mt();return Object(M.jsxs)(f.a,{children:[Object(M.jsx)(yt,{setName:o,show:!a}),Object(M.jsxs)(f.a,{className:u.introContainer,children:[Object(M.jsx)(It,{storyName:t}),Object(M.jsx)(Et,{name:a}),a&&Object(M.jsx)(St,{onClick:function(){s(),r()},children:Nt.notMe})]}),Object(M.jsx)("div",{style:{marginBottom:"16px"},children:Nt.steps}),Object(M.jsx)(O.a,{children:Object(M.jsx)(g.a,{cols:3,cellHeight:"auto",spacing:20,children:n.map((function(e){return Object(M.jsx)(x.a,{children:Object(M.jsx)(xt,Object(m.a)({},e))},e.title)}))})})]})},At=Object(v.a)({buildVersion:{color:"#7a7a7a",fontWeight:"bold",fontSize:"19px",position:"absolute",paddingTop:"10px",top:"-5px",left:"122px"},titleRow:{marginTop:"5px",display:"flex",flexDirection:"row",height:"48px",position:"relative"},logoContainer:{position:"relative",paddingTop:"6px",width:"25%"},titleContainer:{width:"50%",height:"48px",marginTop:"10px",paddingLeft:"15px",paddingRight:"15px",textAlign:"center"},titleWrapper:{fontSize:"13pt",margin:"3px",display:"inline-block"},contextMenuButton:{position:"absolute",right:0}}),Dt=n.p+"static/media/logo_web.d3de7844.svg",Ht=function(e){var t=e.children,n=e.title,r=e.contextMenuItems,c=e.hidden,a=At(),o=Object(i.useRef)(null),u=Y(!1),l=Object(s.a)(u,3),d=l[0],j=l[1],h=l[2];return Object(M.jsx)(M.Fragment,{children:Object(M.jsxs)(f.a,{style:{height:"calc(100vh - 5px)",width:"100%",padding:0,marginTop:"5px",display:"flex",flexDirection:"column"},children:[c?null:Object(M.jsxs)(f.a,{children:[Object(M.jsxs)("div",{className:a.titleRow,children:[Object(M.jsxs)("div",{className:a.logoContainer,children:[Object(M.jsx)("img",{src:Dt,alt:"logo",width:"120px",height:"36px"}),Object(M.jsx)("span",{className:a.buildVersion,children:"TITAN"})]}),Object(M.jsx)("div",{className:a.titleContainer,children:Object(M.jsx)("div",{className:a.titleWrapper,children:n})}),Object(M.jsx)(Xe.a,{onClickAway:function(){return h(!1)},children:Object(M.jsx)(Je.a,{className:a.contextMenuButton,onClick:j,ref:o,children:Object(M.jsx)(qe.a,{})})}),Object(M.jsx)($e,{show:d,anchor:o.current,menuItems:r})]}),Object(M.jsx)(P.a,{})]}),t]})})};!function(e){e[e.Dashboard=0]="Dashboard",e[e.Chunking=1]="Chunking",e[e.Transcribing=2]="Transcribing",e[e.Reviewing=3]="Reviewing"}(bt||(bt={}));var Bt=bt,Pt=new l.a({en:{chunkingDesc:"We need to know when people are talking in the story, so that we can transcribe them.",chunkingTitle:"Chunking",transcriptionDesc:"Writing down exactly what is said in each chunk of the story.",transcriptionTitle:"Transcription",reviewDesc:"Reviewing content is key to making sure we represent participants authentically.",reviewTitle:"Review"},fr:{chunkingDesc:"WE NEED TO KNOW WHEN PEOPLE ARE TALKING IN THE STORY, SO THAT WE CAN TRANSCRIBE THEM.",chunkingTitle:"CHUNKING",transcriptionDesc:"WRITING DOWN EXACTLY WHAT IS SAID IN EACH CHUNK OF THE STORY.",transcriptionTitle:"TRANSCRIPTION",reviewDesc:"REVIEWING CONTENT IS KEY TO MAKING SURE WE REPRESENT PARTICIPANTS AUTHENTICALLY.",reviewTitle:"REVIEW"}}),Mt=function(e,t){return Object(i.useMemo)((function(){return[{title:Pt.chunkingTitle,description:Pt.chunkingDesc,progress:t[0].progress,onSelect:function(){return e(Bt.Chunking)},enabled:t[0].enabled},{title:Pt.transcriptionTitle,description:Pt.transcriptionDesc,progress:t[1].progress,onSelect:function(){return e(Bt.Transcribing)},enabled:t[1].enabled},{title:Pt.reviewTitle,description:Pt.reviewDesc,progress:t[2].progress,onSelect:function(){return e(Bt.Reviewing)},enabled:t[2].enabled}]}),[e,t])},Wt=n(224),Ut=n(225),Ft=n(226),Lt="8px",Yt=Object(v.a)({videoPlayerContainer:{position:"relative",overflow:"hidden"},inputField:{width:"100%"},chunkProgressRail:{height:Lt,color:"#d9534f"},chunkProgressTrack:{height:Lt,color:"#d9534f"},chunkProgressMark:{height:Lt,width:"4px",backgroundColor:"#FFFFFF",opacity:.8},stepperDots:{backgroundColor:"#d9534f"},stepperDotsContainer:{flexWrap:"wrap"},stepperDot:{margin:"2px"}}),Vt=n(221),Gt=n(222),Kt=n(223),zt=Object(v.a)({slideshowContainer:{display:"flex",justifyContent:"center",flexDirection:"row",alignItems:"flex-end",width:"100%"},slideshowContentContainer:{flexGrow:4}}),_t=function(e){var t=e.onNavigate,n=e.onComplete,r=e.currentPage,i=e.numberOfPages,c=e.children,a=e.style,o=e.contentContainerStyle,s=e.leftColumn,u=e.rightColumn,l=zt();return Object(M.jsxs)("div",{className:l.slideshowContainer,style:a,children:[null!==s&&void 0!==s?s:Object(M.jsx)(ge,{round:!0,"aria-label":"Previous",style:{color:"#FFFFFF",alignSelf:"flex-start",marginTop:"32px"},disabled:0===r,onClick:function(){return t("prev")},children:Object(M.jsx)(Vt.a,{})}),Object(M.jsx)(O.a,{style:Object(m.a)({},o),className:l.slideshowContentContainer,children:c}),null!==u&&void 0!==u?u:n&&r===i-1?Object(M.jsx)(ge,{round:!0,"aria-label":"Complete",style:{color:"#FFFFFF",backgroundColor:"#40bf11",alignSelf:"flex-start",marginTop:"32px"},onClick:n,children:Object(M.jsx)(Gt.a,{})}):Object(M.jsx)(ge,{round:!0,"aria-label":"Next",style:{color:"#FFFFFF",alignSelf:"flex-start",marginTop:"32px"},disabled:r===i-1,onClick:function(){return t("next")},children:Object(M.jsx)(Kt.a,{})})]})},Xt=new l.a({en:{transcription:"Transcription"},fr:{transcription:"TRANSCRIPTION"}}),Jt=function(e){var t=e.inputRef,n=e.transcriptionValue,r=e.transcriptionIcon,i=e.onChange;return Object(M.jsx)(W,{title:r,cardStyle:{margin:"16px 8px 0 8px"},children:Object(M.jsx)(xe.a,{autoFocus:!0,multiline:!0,rows:7,inputRef:t,style:{width:"100%"},variant:"outlined",label:Xt.transcription,value:n,onChange:function(e){i(e.target.value)}})})},qt=function(e,t){return je(e.transcriptions,(function(e){return e.creatorid===t}))?e.transcriptions.filter((function(e){return e.creatorid===t}))[0]:void 0},Qt=function(e,t){for(var n=[],r=e.starttimeseconds+4/t;r<e.endtimeseconds;)n.push(r),r+=5/t;return r!==e.endtimeseconds&&n.push(e.endtimeseconds),n},Zt=function(e,t){var n=e+1/t;return n>t?t:n},$t=function(e,t,n,r,c,a,o){var s=Object(i.useCallback)((function(n,r,i,o){var s,u,l=(s=r[i-1],u=e[n],null!==s&&void 0!==s?s:u.starttimeseconds);return a(l),c({start:l,end:Zt(r[i],t)}),{miniChunks:r,currentChunk:n,currentMiniChunk:i,transcription:o}}),[a,c,e,t]);return Object(i.useCallback)((function(i,c){var a,u;switch(r&&["go to next page","go to previous page","flush transcription changes"].includes(c.actionType)&&n(e[i.currentChunk],i.transcription,r),c.actionType){case"go to next page":if(i.currentMiniChunk===i.miniChunks.length-1&&i.currentChunk<e.length-1){var l,d,j=i.currentChunk+1;return s(j,Qt(e[j],t),0,null!==(l=null===(d=qt(e[j],null!==r&&void 0!==r?r:""))||void 0===d?void 0:d.content)&&void 0!==l?l:"")}if(i.currentMiniChunk<i.miniChunks.length-1)return s(i.currentChunk,i.miniChunks,i.currentMiniChunk+1,i.transcription);o();break;case"go to previous page":if(0===i.currentMiniChunk&&i.currentChunk>0){var h,b,p=i.currentChunk-1,O=Qt(e[p],t);return s(p,O,O.length-1,null!==(h=null===(b=qt(e[p],null!==r&&void 0!==r?r:""))||void 0===b?void 0:b.content)&&void 0!==h?h:"")}if(i.currentMiniChunk>0)return s(i.currentChunk,i.miniChunks,i.currentMiniChunk-1,i.transcription);break;case"transcription changed":return void 0!==c.newTranscription?Object(m.a)(Object(m.a)({},i),{},{transcription:c.newTranscription}):Object(m.a)({},i);case"go to first mini chunk":return s(i.currentChunk,i.miniChunks,0,i.transcription),Object(m.a)(Object(m.a)({},i),{},{currentMiniChunk:0});case"go to last mini chunk":var f=i.miniChunks.length-1;return s(i.currentChunk,i.miniChunks,f,i.transcription),Object(m.a)(Object(m.a)({},i),{},{currentMiniChunk:f});case"refresh mini chunks":var g=Qt(e[i.currentChunk],t);return s(i.currentChunk,g,0,i.transcription),Object(m.a)(Object(m.a)({},i),{},{currentMiniChunk:0,miniChunks:g,transcription:null!==(a=null===(u=qt(e[i.currentChunk],null!==r&&void 0!==r?r:""))||void 0===u?void 0:u.content)&&void 0!==a?a:""})}return i}),[e,t,n,r,o,s])},en=n(89),tn=function(e,t){var n=Object(i.useState)(!1),r=Object(s.a)(n,2)[1],c=Object(i.useState)(!1),a=Object(s.a)(c,2),o=a[0],u=a[1],l=Object(en.a)((function(){t(o),r(!1)}),500);return Object(i.useCallback)((function(){r((function(t){return t||u(e),!0})),l(),t(!1)}),[e,t,l])},nn=new l.a({en:{instructionsOne:"You are about to Transcribe the chunks.",instructionsTwo:"Each chunk has been divided into 5 second clips for you. These clips will loop.",instructionsThree:"When you type, the video will pause until you stop typing",instructionsFour:'When you are done transcribing a clip press the ">" button',last:"Last",first:"First"},fr:{instructionsOne:"YOU ARE ABOUT TO TRANSCRIBE THE CHUNKS.",instructionsTwo:"EACH CHUNK HAS BEEN DIVIDED INTO 5 SECOND CLIPS FOR YOU. THESE CLIPS WILL LOOP.",instructionsThree:"WHEN YOU TYPE, THE VIDEO WILL PAUSE UNTIL YOU STOP TYPING",instructionsFour:'WHEN YOU ARE DONE TRANSCRIBING A CLIP PRESS THE ">" BUTTON',last:"LAST",first:"FIRST"}}),rn=function(){return Object(M.jsx)("div",{})},cn=function(e){var t=e.story_id,n=e.atExit,r=e.onboarding,c=be.useChunksState(),a=Object(s.a)(c,2),o=a[0],u=a[1],l=r.showOnboardingModal,d=r.dismissOnboardingModal,j=ue(),h=j.progressState,p=j.playerRef,g=Object(s.a)(j.splitState,2),x=g[0],m=g[1],v=j.duration,C=j.controller,T=Object(s.a)(j.playingState,2),y=T[0],w=T[1],S=pe(u),N=Object(i.useContext)(K).userName,E=h.setProgressWithVideoUpdate,I=$t(o,v,S,N,m,E,n),R=Object(i.useReducer)(I,{currentChunk:0,currentMiniChunk:0,miniChunks:[],transcription:""}),D=Object(s.a)(R,2),H=D[0],B=D[1];Object(i.useEffect)((function(){0!==v&&B({actionType:"refresh mini chunks"})}),[v]);var P=Object(i.useMemo)((function(){return H.currentChunk===o.length-1&&H.currentMiniChunk===H.miniChunks.length-1}),[H.currentChunk,H.currentMiniChunk,H.miniChunks,o]),W=Yt(),U=Object(i.useRef)(null);Object(i.useEffect)((function(){(U.current?U.current:{focus:function(){return null}}).focus()}),[y,H.currentChunk,H.currentMiniChunk]);var F=function(){B({actionType:"flush transcription changes"}),n()},L=tn(y,w);return Object(M.jsxs)("div",{children:[Object(M.jsx)(rt,{open:0===v}),Object(M.jsx)(f.a,{style:{marginBottom:"4px"},children:Object(M.jsx)(Ue,{action:F})}),Object(M.jsx)(lt,{show:l,dismiss:d,title:Object(M.jsx)("h2",{style:{margin:0},children:"Transcribing Instructions"}),steps:[nn.instructionsOne,nn.instructionsTwo,nn.instructionsThree,nn.instructionsFour],startButtonContent:Object(M.jsx)("div",{children:"Start Transcribing"})}),o.length&&Object(M.jsxs)(M.Fragment,{children:[Object(M.jsx)(O.a,{className:W.videoPlayerContainer,children:Object(M.jsx)(se,{progressState:h,playerRef:p,url:"http://".concat(Ne,":8845/api/watch/getvideo/").concat(t),controller:C,loop:!0})}),Object(M.jsxs)("div",{style:{margin:"0 8px 0 8px"},children:[Object(M.jsx)(Wt.a,{variant:"dots",steps:H.miniChunks.length,activeStep:H.currentMiniChunk,position:"static",classes:{dotActive:W.stepperDots,dots:W.stepperDotsContainer,dot:W.stepperDot},nextButton:Object(M.jsx)(_.a,{onClick:function(){return B({actionType:"go to last mini chunk"})},children:nn.last}),backButton:Object(M.jsx)(_.a,{onClick:function(){return B({actionType:"go to first mini chunk"})},children:nn.first})}),Object(M.jsx)(_t,{currentPage:H.currentChunk,onNavigate:function(){return null},numberOfPages:o.length,onComplete:F,leftColumn:Object(M.jsx)("div",{children:Object(M.jsx)(ge,{onClick:function(){return B({actionType:"go to previous page"})},children:Object(M.jsx)(Ut.a,{})})}),rightColumn:Object(M.jsx)("div",{children:Object(M.jsx)(ge,{style:{backgroundColor:P?"green":"#d9534f"},onClick:function(){return B({actionType:"go to next page"})},children:P?Object(M.jsx)(b.a,{}):Object(M.jsx)(Ft.a,{})})}),children:Object(M.jsx)(Jt,{transcriptionIcon:Object(M.jsxs)("div",{style:{display:"flex",flexDirection:"column",margin:"0 8px 0 8px"},children:[Object(M.jsx)("span",{style:{fontWeight:600,overflowWrap:"anywhere"},children:A(o[H.currentChunk])}),Object(M.jsx)(ee.a,{ThumbComponent:rn,value:[100*o[H.currentChunk].starttimeseconds,100*o[H.currentChunk].endtimeseconds],classes:{rail:W.chunkProgressRail,track:W.chunkProgressTrack,mark:W.chunkProgressMark,markActive:W.chunkProgressMark},marks:[{value:100*x.start,label:k(H.miniChunks[H.currentMiniChunk]*v)}]})]}),inputRef:U,transcriptionValue:H.transcription,onChange:function(e){L(),B({actionType:"transcription changed",newTranscription:e})}})})]})]}),Object(M.jsx)("div",{style:{position:"absolute",left:0,bottom:0,width:"100%"},children:!1})]})},an=n(66),on=n.n(an),sn=n(90),un=n(63),ln=n.n(un),dn=function(e,t){var n="http://".concat(Ne,":8845/api/watch/savedit/").concat(t,"?apikey=").concat(Ee);ln.a.request({url:n,method:"POST",withCredentials:!0,data:e})},jn=function(e){var t,n=Object(i.useState)(void 0),r=Object(s.a)(n,2),c=r[0],a=r[1],o=Object(i.useMemo)((function(){var e;return null!==(e=null===c||void 0===c?void 0:c.transcription.chunks)&&void 0!==e?e:[]}),[null===c||void 0===c||null===(t=c.transcription)||void 0===t?void 0:t.chunks]),u=Object(i.useCallback)(function(){var t=Object(sn.a)(on.a.mark((function t(n){var r;return on.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.t0=n,t.next=3,ln.a.request({withCredentials:!0,url:"http://".concat(Ne,":8845/api/watch/edit/").concat(e),transformResponse:function(e){var t,n,r;return null!==(t=null===(n=JSON.parse(e))||void 0===n||null===(r=n.transcription)||void 0===r?void 0:r.chunks)&&void 0!==t?t:[]}});case 3:t.t1=t.sent.data,r=(0,t.t0)(t.t1),a((function(t){var n=void 0===t?void 0:Object(m.a)(Object(m.a)({},t),{},{transcription:{chunks:r}});return n&&dn(n,e),n}));case 6:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),[e]);Object(i.useEffect)((function(){ln.a.request({url:"http://".concat(Ne,":8845/api/watch/edit/").concat(e),withCredentials:!0,transformResponse:function(e){return JSON.parse(e)}}).then((function(e){var t,n,r,i;a(e.data),i=null!==(t=null===(n=e.data)||void 0===n||null===(r=n.transcription)||void 0===r?void 0:r.chunks)&&void 0!==t?t:[],a((function(e){return void 0===e?void 0:Object(m.a)(Object(m.a)({},e),{},{transcription:{chunks:i}})}))}))}),[e]);var l=Object(i.useMemo)((function(){return[o,u]}),[o,u]);return{storyTitle:c&&c.title,chunksState:l}},hn=n(204),bn=n(160),pn=n(231),On=n(227),fn=n(228),gn=new l.a({en:{instructionsOne:"YOU ARE ABOUT TO REVIEW THE TRANSCRIPTIONS MADE ON THE VIDEO.",instructionsTwo:"FOR EACH CHUNK, SELECT ONE OF THE TRANSCRIPTIONS FROM THE LIST. YOU CAN DO THIS BY CLICKING ON THE TEXT OR THE CHECK BOX TO THE LEFT OF THE TEXT.",instructionsThree:"YOU CAN ALSO EDIT THE TRANSCRIPTIONS BY CLICKING ON THE PENCIL BUTTON ABOVE THE TEXT.",editingTranscriptionWarningHeading:"YOU ARE EDITING {0}'S TRANSCRIPTION",nameTranscription:"{0}: {1}",instructionsTitle:"REVIEWING INSTRUCTIONS"}}),xn=Object(v.a)({doneButton:{backgroundColor:"green",color:"white"},cardContainer:{marginTop:"8px",marginBottom:"8px",padding:"0 8px 0 8px",width:"100%"}}),mn=function(e){var t=e.atExit,n=e.story_id,r=e.onboarding,c=r.showOnboardingModal,a=r.dismissOnboardingModal,o=ue(),u=o.progressState,l=Object(s.a)(o.splitState,2)[1],d=o.controller,j=o.playerRef,h=o.duration,p=u.setProgressWithVideoUpdate,g=be.useChunksState(),x=Object(s.a)(g,2),v=x[0],C=x[1],T=xn(),y=v.filter(E),k=st(y),w=k.page,S=k.goTo,N=k.lastPage,I=Object(i.useMemo)((function(){return y[w]}),[w,y]);Object(i.useEffect)((function(){l({start:I.starttimeseconds,end:I.endtimeseconds}),p(I.starttimeseconds)}),[w,v,I,p,l]);var R=function(){var e=be.useChunksState(),t=Object(s.a)(e,2)[1];return function(e,n,r){t((function(t){return t.map((function(t){return t.id===e.id&&je(t.transcriptions,(function(e){return e.id===n.id}))?Object(m.a)(Object(m.a)({},t),{},{review:{reviewedat:new Date,selectedtranscription:n.id,reviewedby:r}}):t}))}))}}(),A=function(){var e=be.useChunksState(),t=Object(s.a)(e,2)[1];return function(e){t((function(t){return t.map((function(t){return t.id===e.id?Object(m.a)(Object(m.a)({},t),{},{review:void 0}):t}))}))}}(),D=Object(i.useContext)(K).userName,H=Object(i.useState)(""),W=Object(s.a)(H,2),U=W[0],L=W[1],Y=Object(i.useState)(void 0),V=Object(s.a)(Y,2),G=V[0],z=V[1];Object(i.useEffect)((function(){L(G?G.content:"")}),[G]);var _=pe(C);return Object(M.jsxs)("div",{children:[Object(M.jsx)(rt,{open:0===h}),Object(M.jsx)(f.a,{style:{marginTop:"4px"},children:Object(M.jsx)(Ue,{action:t})}),Object(M.jsx)(lt,{show:c,dismiss:a,steps:[gn.instructionsOne,gn.instructionsTwo,gn.instructionsThree],title:Object(M.jsx)("h2",{style:{margin:0},children:gn.instructionsTitle}),startButtonContent:Object(M.jsx)("div",{children:"Start Reviewing"})}),Object(M.jsx)(we,{open:void 0!==G,header:Object(M.jsx)(Ge,{message:Object(M.jsx)("div",{style:{whiteSpace:"pre"},children:gn.formatString(gn.editingTranscriptionWarningHeading,Object(M.jsx)("span",{style:{textDecoration:"underline"},children:"".concat(null===G||void 0===G?void 0:G.creatorid)}))})}),exit:function(){z(void 0)},children:Object(M.jsxs)("div",{style:{position:"relative"},children:[Object(M.jsx)(hn.a,{style:{maxHeight:"300px",overflow:"scroll"},children:I.transcriptions.filter((function(e){return e.id!==(null===G||void 0===G?void 0:G.id)})).map((function(e){return Object(M.jsx)(bn.a,{style:{display:"flex",whiteSpace:"pre"},children:gn.formatString(gn.nameTranscription,Object(M.jsx)("span",{style:{alignSelf:"flex-start",fontWeight:600},children:e.creatorid}),Object(M.jsx)("div",{style:{whiteSpace:"pre",overflowWrap:"anywhere"},children:e.content}))})}))}),Object(M.jsx)(Jt,{transcriptionValue:U,onChange:L}),Object(M.jsx)("div",{style:{display:"flex",justifyContent:"flex-end"},children:Object(M.jsx)(ge,{onClick:function(){G&&_(I,U,G.creatorid),z(void 0)},style:{margin:"8px",backgroundColor:"green",position:"relative",bottom:0,right:0},disabled:""===U,children:Object(M.jsx)(Gt.a,{})})})]})}),Object(M.jsx)(O.a,{children:Object(M.jsx)(se,{playerRef:j,progressState:u,url:"http://".concat(Ne,":8845/api/watch/getvideo/").concat(n),controller:d})}),Object(M.jsx)(f.a,{children:Object(M.jsx)(_t,{currentPage:w,onNavigate:S,numberOfPages:y.length,onComplete:t,style:{width:"100%"},contentContainerStyle:{margin:"0 64px 0 64px"},leftColumn:Object(M.jsx)("div",{style:{position:"fixed",bottom:0,left:0,margin:"16px",zIndex:1},children:Object(M.jsx)(ge,{onClick:function(){return S("prev")},children:Object(M.jsx)(Ut.a,{})})}),rightColumn:Object(M.jsx)("div",{style:{position:"fixed",bottom:0,right:0,margin:"16px",zIndex:1},children:Object(M.jsx)(ge,{onClick:function(){return N?t():S("next")},style:{backgroundColor:N?"green":"#d9534f"},children:N?Object(M.jsx)(b.a,{}):Object(M.jsx)(Ft.a,{})})}),children:Object(M.jsx)(F,{chunk:I,children:I.transcriptions.map((function(e){var t;return e.content&&Object(M.jsxs)(O.a,{className:T.cardContainer,children:[Object(M.jsxs)("div",{style:{display:"flex",justifyContent:"space-between"},children:[Object(M.jsxs)("div",{style:{fontSize:"1.2rem",display:"flex",justifyContent:"center",paddingLeft:"10px"},children:[Object(M.jsx)(On.a,{}),Object(M.jsx)("div",{style:{marginLeft:"4px",overflowWrap:"anywhere"},children:e.creatorid})]}),Object(M.jsx)(ge,{onClick:function(){return z(e)},style:{padding:"0px",height:"32px",width:"32px",minWidth:"32px"},children:Object(M.jsx)(fn.a,{fontSize:"small"})})]}),Object(M.jsxs)("div",{onClick:function(){var t;return D&&((null===(t=I.review)||void 0===t?void 0:t.selectedtranscription)!==e.id?R(I,e,D):A(I))},style:{display:"flex",flexDirection:"row"},children:[Object(M.jsx)(pn.a,{checked:(null===(t=I.review)||void 0===t?void 0:t.selectedtranscription)===e.id,onChange:function(t,n){return D&&(n?R(I,e,D):A(I))},style:{backgroundColor:"initial"}}),Object(M.jsx)(B.a,{variant:"h6",style:{padding:"8px",overflowWrap:"anywhere",whiteSpace:"pre"},children:e.content})]}),Object(M.jsx)(P.a,{style:{margin:"16px 0 16px 0"}})]},e.id)}))})})})]})},vn=n(91),Cn=new l.a({en:{yr:"year",mt:"month",dy:"day",hr:"hour",min:"minute",sec:"second",yrs:"years",mts:"months",dys:"days",hrs:"hours",mins:"minutes",secs:"seconds",periodAgo:"{0} {1} ago",contributions:"Contributions",created:"Created",transcribed:"Transcribed",reviewed:"Reviewed",contributionDescription:'{0} the chunk "{1}" ({2}) {3}'},fr:{yr:"YEAR",mt:"MONTH",dy:"DAY",hr:"HOUR",min:"MINUTE",sec:"SECOND",yrs:"YEARS",mts:"MONTHS",dys:"DAYS",hrs:"HOURS",mins:"MINUTES",secs:"SECONDS",periodAgo:"{0} {1} AGO",contributions:"CONTRIBUTIONS",created:"CREATED",transcribed:"TRANSCRIBED",reviewed:"REVIEWED",contributionDescription:'{0} THE CHUNK "{1}" ({2}) {3}'}}),Tn=[["yr",31536e3],["mt",2592e3],["dy",86400],["hr",3600],["min",60],["sec",1]],yn=function(e){var t=function(e){var t,n=Object(vn.a)(Tn);try{for(n.s();!(t=n.n()).done;){var r=Object(s.a)(t.value,2),i=r[0],c=r[1],a=Math.floor(e/+c);if(a>=1)return{interval:a,epoch:i}}}catch(o){n.e(o)}finally{n.f()}return{interval:0,epoch:Cn.sec}}(Math.floor((+new Date-+new Date(e))/1e3)),n=t.interval,r=t.epoch;return r===Cn.sec?Cn.formatString(Cn.periodAgo,"Less than a","minute"):Cn.formatString(Cn.periodAgo,n.toString(),"".concat(1===n?Cn.getString(r):function(e){return Cn.getString("".concat(e,"s"))}(r)))},kn=function(e){var t,n,r,i,c=e.contribution,a=c.type,o=c.name,s=c.chunk;return Object(M.jsx)("span",{style:{whiteSpace:"pre",display:"flex",flexWrap:"wrap"},children:Cn.formatString(Cn.contributionDescription,Object(M.jsx)("span",{style:{fontWeight:"bold"},children:function(e){switch(e){case"chunk":return Cn.created;case"transcription":return Cn.transcribed;case"review":return Cn.reviewed}}(a)}),Object(M.jsx)("div",{style:{overflowWrap:"anywhere"},children:A(s)}),Object(M.jsx)(M.Fragment,{children:"".concat(k(R(I(s.starttimestamp)))," - ").concat(k(R(I(s.endtimestamp))))}),Object(M.jsx)(B.a,{variant:"subtitle2",style:{marginLeft:"4px",fontWeight:600},children:yn("chunk"===a?s.updatedat:"transcription"===a?null!==(t=null===(n=qt(s,o))||void 0===n?void 0:n.updatedat)&&void 0!==t?t:new Date:null!==(r=null===(i=s.review)||void 0===i?void 0:i.reviewedat)&&void 0!==r?r:new Date)}))})},wn=function(e){var t=e.show,n=e.exit,r=e.chunks,c=Object(i.useMemo)((function(){return Array.from(function(e){return e.map((function(e){return{name:e.creatorid,type:"chunk",chunk:e}})).concat(e.reduce((function(e,t){return e.concat(t.transcriptions.map((function(e){return{name:e.creatorid,type:"transcription",chunk:t}})))}),[])).concat(e.reduce((function(e,t){return t.review?e.concat([{name:t.review.reviewedby,type:"review",chunk:t}]):e}),[]))}(r).reduce((function(e,t){return e.get(t.name)?e.set(t.name,e.get(t.name).concat([t])):e.set(t.name,[t])}),new Map))}),[r]);return Object(M.jsx)(we,{header:Object(M.jsx)(B.a,{variant:"h3",style:{fontWeight:"lighter"},children:Cn.contributions}),open:t,exit:n,children:Object(M.jsx)(ye,{children:Object(M.jsx)(f.a,{style:{height:"80vh",width:"90vw",overflow:"scroll"},children:Object(M.jsx)(g.a,{cols:1,cellHeight:"auto",children:c.map((function(e){return Object(M.jsx)(x.a,{children:Object(M.jsx)(W,{title:Object(M.jsx)("div",{style:{overflowWrap:"anywhere"},children:e[0]}),children:Object(M.jsx)(hn.a,{children:e[1].map((function(e){return Object(M.jsx)(bn.a,{children:Object(M.jsx)(kn,{contribution:e})},"".concat(e.chunk.id).concat(e.type))}))})})},e[0])}))})})})})},Sn=new l.a({en:{loading:"Loading",viewInstructions:"View Instructions",chunking:"Chunking",dashboard:"Dashboard",reviewing:"Reviewing",transcribing:"Transcribing",showContributions:"Show Contributions"},fr:{loading:"LOADING",viewInstructions:"VIEW INSTRUCTIONS",chunking:"CHUNKING",dashboard:"DASHBOARD",reviewing:"REVIEWING",transcribing:"TRANSCRIBING",showContributions:"SHOW CONTRIBUTIONS"}}),Nn=function(e){switch(e){case Bt.Chunking:return Sn.chunking;case Bt.Dashboard:return Sn.dashboard;case Bt.Reviewing:return Sn.reviewing;case Bt.Transcribing:return Sn.transcribing}},En=function(){var e=Object(i.useState)(Bt.Dashboard),t=Object(s.a)(e,2),n=t[0],r=t[1],c=be.ChunksProvider,a=function(){var e=Object(i.useState)(""),t=Object(s.a)(e,2),n=t[0],r=t[1];return Object(i.useEffect)((function(){r(window.location.href.split("/")[4].split("?")[0])}),[]),n}(),o=jn(a),u=o.storyTitle,l=Object(s.a)(o.chunksState,2),d=l[0],j=l[1],h=Object(i.useMemo)((function(){return S(d)}),[d]),b=Object(i.useMemo)((function(){return d.length?function(e){return e.reduce((function(e,t){return e+(E(t)?1:0)}),0)}(d)/d.length:0}),[d]),p=Object(i.useMemo)((function(){return d.length?function(e){return e.reduce((function(e,t){return e+(t.review?1:0)}),0)}(d)/d.length:0}),[d]),O=Mt(r,[{progress:100*h,enabled:!0},{progress:100*b,enabled:h>0},{progress:100*p,enabled:b>0}]),f=Y(!1),g=Object(s.a)(f,2),x=g[0],m=g[1],v=V("showChunkEditorOnboardingModal","true"),C=Object(s.a)(v,2),T=C[0],y=C[1],k=V("showTranscriberOnboardingModal","true"),w=Object(s.a)(k,2),N=w[0],I=w[1],R=V("showReviewerOnboardingModal","true"),A=Object(s.a)(R,2),D=A[0],H=A[1],B=Object(i.useCallback)((function(){return r(Bt.Dashboard)}),[]),P=Object(i.useMemo)((function(){return[{content:Object(M.jsx)("div",{children:Sn.showContributions}),handler:m}].concat(n===Bt.Chunking?{content:Object(M.jsx)("div",{children:Sn.viewInstructions}),handler:function(){y("true")}}:n===Bt.Reviewing?{content:Object(M.jsx)("div",{children:Sn.viewInstructions}),handler:function(){H("true")}}:[])}),[n,y,H,m]);return Object(M.jsx)(c,{state:[d,j],children:Object(M.jsx)(z,{children:Object(M.jsxs)("main",{children:[Object(M.jsx)(wn,{chunks:d,show:x,exit:m}),Object(M.jsx)(Ht,{title:Nn(n),hidden:n===Bt.Transcribing,contextMenuItems:P,children:n===Bt.Dashboard?Object(M.jsx)(Rt,{steps:O,storyName:u||Sn.loading,logOutAction:function(){y("true"),I("true"),H("true")}}):n===Bt.Chunking?Object(M.jsx)(jt,{story_id:a,atExit:B,onboarding:{showOnboardingModal:"true"===T,dismissOnboardingModal:function(){return y("false")}}}):n===Bt.Transcribing?Object(M.jsx)(cn,{story_id:a,atExit:B,onboarding:{showOnboardingModal:"true"===N,dismissOnboardingModal:function(){return I("false")}}}):n===Bt.Reviewing?Object(M.jsx)(mn,{atExit:B,story_id:a,onboarding:{showOnboardingModal:"true"===D,dismissOnboardingModal:function(){return H("false")}}}):null})]})})})},In=function(e){e&&e instanceof Function&&n.e(3).then(n.bind(null,241)).then((function(t){var n=t.getCLS,r=t.getFID,i=t.getFCP,c=t.getLCP,a=t.getTTFB;n(e),r(e),i(e),c(e),a(e)}))};o.a.render(Object(M.jsx)(c.a.StrictMode,{children:Object(M.jsx)(En,{})}),document.getElementById("root")),In()}},[[157,1,2]]]);
//# sourceMappingURL=main.a96752c5.chunk.js.map