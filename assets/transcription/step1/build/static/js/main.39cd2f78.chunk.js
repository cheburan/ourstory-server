(this["webpackJsonpindaba-transcription"]=this["webpackJsonpindaba-transcription"]||[]).push([[0],{120:function(e,t,a){e.exports=a(170)},125:function(e,t,a){},126:function(e,t,a){},170:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),i=a(17),o=a.n(i),l=(a(125),a(126),a(100)),s=a(101),c=a(111),u=a(102),p=a(112),m=a(40),h=a(6),d=a(211),f=a(212),k=a(204),E=a(208),y=a(207),g=a(209),v=a(210);function b(e){var t=~~e%60,a="";return a+=~~(e%3600/60)+":"+(t<10?"0":""),a+=""+t}var w=Object(h.a)({root:{display:"flex",flexWrap:"nowrap",justifyContent:"space-around",overflow:"hidden"},gridList:{flexWrap:"nowrap",transform:"translateZ(0)",spacing:10},titleBar:{background:"linear-gradient(to top, rgba(0,0,0,0.7) 0%, rgba(0,0,0,0.3) 70%, rgba(0,0,0,0) 100%)"}})((function(e){var t=e.classes,a=e.chunks;return r.a.createElement("div",{className:t.root},r.a.createElement("div",{style:{overflowX:"auto",width:"100%",whiteSpace:"nowrap"}},a.map((function(t){return r.a.createElement(k.a,{onClick:function(){return e.onPlay(t.startTime)},style:{display:"inline-block",margin:"0.2em"}},r.a.createElement(y.a,null,r.a.createElement(E.a,null,r.a.createElement("h2",{style:{"text-align":"center"}},b(t.startTime)," - ",b(t.endTime)))),r.a.createElement(g.a,{disableSpacing:!0},r.a.createElement(v.a,{size:"small",color:"primary",onClick:function(){return e.onPlay(t.startTime)}},r.a.createElement(d.a,null)),r.a.createElement(v.a,{size:"small",color:"primary",onClick:function(){return e.onDelete(t.startTime,t.endTime)}},r.a.createElement(f.a,null))))}))))})),C=a(222),T=a(214),S=a(224),O=a(215),x=a(216),B=a(220),j=a(106),D=a.n(j),P=a(107),W=a.n(P),z=a(108),I=a.n(z),N=a(213),H={avatar:{backgroundColor:N.a[100],color:N.a[600]}};var J=Object(h.a)(H)((function(e){var t=e.classes,a=e.open,n=e.options;return r.a.createElement(B.a,{onClose:e.onClose,"aria-labelledby":"simple-dialog-title",open:a},r.a.createElement(T.a,null,n.map((function(a){return r.a.createElement(S.a,{button:!0,onClick:function(){return e.onClose(a)},key:a},r.a.createElement(O.a,null,r.a.createElement(C.a,{className:t.avatar},function(e){switch(e){case 0:return r.a.createElement(D.a,null);case 1:return r.a.createElement(W.a,null);case 2:return r.a.createElement(I.a,null)}}(n.indexOf(a)))),r.a.createElement(x.a,{primary:a}))}))))})),q=a(59),A=a.n(q),L=a(217),M=a(218),R=a(110),X=a.n(R),Z=a(109),$=a.n(Z),F=a(221),G=function(e){function t(e,a){var n;return Object(l.a)(this,t),(n=Object(c.a)(this,Object(u.a)(t).call(this,e,a))).handlePlay=function(e){n.player.seek(e),n.player.play()},n.skipBack=function(){var e=n.player.getState().player;n.player.seek(e.currentTime-2)},n.handleDelete=function(e,t){var a=n.state.original,r=a.transcription.chunks.filter((function(t){return t.startTime!==e})),i=n.state.original.transcription.chunks.findIndex((function(e){return e.startTime===t}));i>=1&&(r[--i].startTime=e),a.transcription.chunks=r,n.setState({original:a}),n.saveEdit()},n.handleClickOpen=function(){n.handleConfirm()},n.handleClose=function(e){switch(n.setState({open:!1}),e){case n.state.options[0]:var t=n.player.getState().player;n.player.seek(t.currentTime-2);break;case n.state.options[1]:n.handleConfirm()}},n.closeError=function(){n.setState({erroropen:!1})},n.state={original:{transcription:{chunks:[]}},source:e.src,open:!1,options:["Backward 2 Seconds","Add New Breakpoint","Discard Setting"],erroropen:!1},n}return Object(p.a)(t,e),Object(s.a)(t,[{key:"componentDidMount",value:function(){this.player.subscribeToStateChange(this.handleStateChange.bind(this)),this.serverRequest=A.a.get("/api/watch/edit/"+this.props.id).then(function(e){e.data.transcription||(e.data.transcription={chunks:[]}),this.setState({original:e.data})}.bind(this))}},{key:"handleStateChange",value:function(e){this.setState({player:e})}},{key:"saveEdit",value:function(){A.a.post("/api/watch/savedit/"+this.props.id+"?apikey="+this.props.apikey,this.state.original).then((function(e){console.log(e)}))}},{key:"handleConfirm",value:function(){var e=this.state.player.currentTime,t=this.state.original,a={endTime:e},n=this.state.original.transcription.chunks.findIndex((function(t){return e>=t.startTime&&e<=t.endTime}));if(0!=e){if(n>=1)t.transcription.chunks[n].startTime=e,a.startTime=t.transcription.chunks[--n].endTime,t.transcription.chunks.splice(++n,0,a);else if(0===n)t.transcription.chunks[n].startTime=e,a.startTime=0,t.transcription.chunks.splice(n,0,a);else{var r=t.transcription.chunks.slice(-1)[0];a.startTime=r?r.endTime:0,t.transcription.chunks.push(a)}this.setState({original:t}),this.saveEdit()}else this.setState({erroropen:!0})}},{key:"render",value:function(){var e=this;return r.a.createElement("div",null,r.a.createElement("br",null),r.a.createElement(L.a,{maxWidth:"sm"},r.a.createElement(m.Player,{ref:function(t){e.player=t}},r.a.createElement("source",{src:this.state.source}),r.a.createElement(m.BigPlayButton,{position:"center"}),r.a.createElement(m.Shortcut,{clickable:!0}),r.a.createElement(m.ControlBar,{autoHide:!1}))),r.a.createElement("br",null),r.a.createElement(w,{style:{width:"100%"},onPlay:this.handlePlay,onDelete:this.handleDelete,chunks:this.state.original.transcription.chunks}),r.a.createElement(J,{open:this.state.open,options:this.state.options,onClose:this.handleClose}),r.a.createElement("div",{id:"output"}),r.a.createElement(M.a,{color:"primary",onClick:this.skipBack,"aria-label":"left",style:{position:"absolute",left:"2em",top:"45%"}},r.a.createElement($.a,null)),r.a.createElement(M.a,{color:"primary",onClick:this.handleClickOpen,"aria-label":"add",style:{position:"absolute",right:"1em",top:"45%"}},r.a.createElement(X.a,null)),r.a.createElement(F.a,{anchorOrigin:{vertical:"bottom",horizontal:"center"},open:this.state.erroropen,autoHideDuration:1e3,onClose:this.closeError,message:"Cannot add breakpoint here"}))}}]),t}(n.Component),K=a(223);var Q=function(){var e=window.location.href.split("/")[5].split("?")[0],t=window.location.href.split("apikey=")[1];return r.a.createElement("main",null,r.a.createElement(L.a,{maxWidth:"lg"},r.a.createElement(K.a,null),r.a.createElement(G,{src:"/api/watch/getvideo/"+e,id:e,apikey:t})))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));a(169);o.a.render(r.a.createElement(Q,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()}))}},[[120,1,2]]]);
//# sourceMappingURL=main.39cd2f78.chunk.js.map